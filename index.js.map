{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-fuctions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst myApiKey = \"48961514-d720aad073d42be14fd4daf93\";\r\nconst URL = \"https://pixabay.com/api/\";\r\n\r\nexport async function axiosImages(query, currentPage = 1) {\r\n    try {\r\n        const response = await axios.get(URL, {\r\n            params: {\r\n                key: myApiKey,\r\n                q: query,\r\n                image_type: \"photo\",\r\n                orientation: \"horizontal\",\r\n                safesearch: \"true\",\r\n                page: currentPage,\r\n                per_page: 40\r\n            },\r\n        });\r\n\r\n        return {\r\n            images: response.data.hits,\r\n            totalHits: response.data.totalHits\r\n        };\r\n    } catch (error) {\r\n        console.error(\"Error fetching images:\", error);\r\n        iziToast.error({\r\n            message: \"An error occurred while fetching images. Please try again!\",\r\n            position: \"topRight\",\r\n            messageColor: \"#FAFAFB\",\r\n            backgroundColor: \"#EF4040\"\r\n        });\r\n        return { images: [], totalHits: 0 };\r\n    }\r\n}\r\n","import SimpleLightbox from \"simplelightbox\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\n\r\nconst gallery = document.querySelector(\".gallery\");\r\n\r\nexport function displayImages(images, currentPage) {\r\n    if (currentPage === 1) {\r\n        gallery.innerHTML = \"\";\r\n    }\r\n\r\n    const markup = images\r\n        .map(\r\n            (image) => `\r\n        <li class=\"img-card\">\r\n            <a href=\"${image.largeImageURL}\">\r\n                <img \r\n                    src=\"${image.webformatURL}\" \r\n                    alt=\"${image.tags}\" \r\n                    data-source=\"${image.largeImageURL}\" \r\n                />\r\n            </a>\r\n            <div class=\"image-info\">\r\n                <p><strong>Likes:</strong> ${image.likes}</p>\r\n                <p><strong>Views:</strong> ${image.views}</p>\r\n                <p><strong>Comments:</strong> ${image.comments}</p>\r\n                <p><strong>Downloads:</strong> ${image.downloads}</p>\r\n            </div>\r\n        </li>`\r\n        )\r\n        .join(\"\");\r\n\r\n    gallery.insertAdjacentHTML('beforeend', markup);\r\n\r\n    const lightbox = new SimpleLightbox(\".gallery a\", {\r\n        captionsData: \"alt\",\r\n        captionDelay: 250,\r\n    });\r\n\r\n    lightbox.refresh();\r\n}\r\n","import iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\nimport { axiosImages } from \"./js/pixabay-api\";\r\nimport { displayImages } from \"./js/render-fuctions\";\r\n\r\nconst form = document.querySelector(\"form\");\r\nconst loadingMessage = document.querySelector(\".loader\");\r\nconst loadingBottom = document.querySelector(\".loader-bottom\");\r\nconst btnLoadMore = document.querySelector(\".btn-loadmore\");\r\n\r\nlet currentPage = 1;\r\nlet previousSearch = \"\";\r\nlet userQuery = \"\";\r\nlet totalHits = 0;\r\n\r\nform.addEventListener(\"submit\", async (evt) => {\r\n    evt.preventDefault();\r\n\r\n    const input = evt.target.querySelector(\"input\");\r\n    const inputValue = input.value.trim();\r\n\r\n    if (inputValue === \"\") {\r\n        iziToast.error({\r\n            message: \"Please fill in the field!\",\r\n            position: \"topRight\",\r\n            messageColor: \"#FAFAFB\",\r\n            backgroundColor: \"#EF4040\"\r\n        });\r\n        return;\r\n    }\r\n\r\n    userQuery = inputValue;\r\n\r\n    if (inputValue !== previousSearch) {\r\n        currentPage = 1;\r\n        previousSearch = inputValue;\r\n    }\r\n\r\n    if (loadingMessage) {\r\n        loadingMessage.style.display = \"block\";\r\n        console.log(\"Loading message shown\");\r\n    };\r\n    btnLoadMore.style.display = \"none\";\r\n\r\n    try {\r\n        const { images, totalHits } = await axiosImages(userQuery, currentPage);\r\n\r\n        if (!images || images.length === 0) {\r\n            iziToast.warning({\r\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\r\n                position: \"topRight\",\r\n                messageColor: \"#FAFAFB\",\r\n                backgroundColor: \"#EF4040\"\r\n            });\r\n            return;\r\n        }\r\n\r\n        displayImages(images, currentPage);\r\n\r\n        if (currentPage * 40 >= totalHits) {\r\n            btnLoadMore.style.display = \"none\";\r\n            iziToast.error({\r\n                message: \"We're sorry, but you've reached the end of search results.\",\r\n                position: \"topRight\",\r\n                messageColor: \"#FAFAFB\",\r\n                backgroundColor: \"#EF4040\"\r\n            });\r\n        } else {\r\n            btnLoadMore.style.display = \"block\";\r\n        }\r\n\r\n        currentPage++;\r\n\r\n    } catch (error) {\r\n        iziToast.error({\r\n            message: \"Error\",\r\n            position: \"topRight\",\r\n            messageColor: \"#FAFAFB\",\r\n            backgroundColor: \"#EF4040\"\r\n        });\r\n    } finally {\r\n        if (loadingMessage) {\r\n            loadingMessage.style.display = \"none\";\r\n        }\r\n    };\r\n\r\n    form.reset();\r\n});\r\n\r\n\r\nbtnLoadMore.addEventListener(\"click\", async () => {\r\n    if (loadingBottom) {\r\n        btnLoadMore.style.display = \"none\";\r\n        loadingBottom.style.display = \"block\";\r\n        console.log(\"Loading bottom message shown\");\r\n    };\r\n\r\n    try {\r\n        const { images, totalHits } = await axiosImages(userQuery, currentPage);\r\n\r\n        if (images && images.length > 0) {\r\n            displayImages(images, currentPage);\r\n            currentPage++;\r\n\r\n            if (currentPage * 40 >= totalHits) {\r\n                btnLoadMore.style.display = \"none\";\r\n                iziToast.error({\r\n                    message: \"We're sorry, but you've reached the end of search results.\",\r\n                    position: \"topRight\",\r\n                    messageColor: \"#FAFAFB\",\r\n                    backgroundColor: \"#EF4040\"\r\n                });\r\n            }\r\n\r\n            scrollToNextImages();\r\n        }\r\n    } catch (error) {\r\n        iziToast.error({\r\n            message: \"Error loading more images\",\r\n            position: \"topRight\",\r\n            messageColor: \"#FAFAFB\",\r\n            backgroundColor: \"#EF4040\"\r\n        });\r\n    } finally {\r\n        if (loadingBottom) {\r\n            loadingBottom.style.display = \"none\";\r\n            btnLoadMore.style.display = \"block\";\r\n        }\r\n    };\r\n});\r\n\r\nfunction scrollToNextImages() {\r\n    const firstImageCard = document.querySelector(\".img-card\");\r\n    if (firstImageCard) {\r\n        const cardHeight = firstImageCard.getBoundingClientRect().height;\r\n        window.scrollBy({\r\n            top: cardHeight * 2,\r\n            behavior: \"smooth\"\r\n        });\r\n    }\r\n}\r\n"],"names":["myApiKey","URL","axiosImages","query","currentPage","response","axios","error","gallery","displayImages","images","markup","image","SimpleLightbox","form","loadingMessage","loadingBottom","btnLoadMore","previousSearch","userQuery","evt","inputValue","iziToast","totalHits","scrollToNextImages","firstImageCard","cardHeight"],"mappings":"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"}